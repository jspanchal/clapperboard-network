{% capture meta_url %}{{ site.url }}/{{ page.url | remove_first: '/' }}{% endcapture %}

{% if title %}
{% assign page_title = title %}
{% elsif page.title %}
{% assign page_title = page.title %}
{% else %}
{% assign page_title = site.name %}
{% endif %}
{% capture meta_title %}{{page_title | markdownify | strip_html | strip_newlines | escape_once}}{% endcapture %}

{% if page.content and page.current == 'post' or page.current == 'about' %}
{% assign excerpt = page.content | strip_html | truncatewords: 100, "" %}
{% endif %} <!--title below is coming from _includes/dynamic_title-->

{% if page.description %}
{% assign page_description = page.description %}
{% elsif excerpt %}
{% assign page_description = excerpt %}
{% else %}
{% assign page_description = site.description %}
{% endif %}
{% capture meta_description %}{{page_description | strip_html | xml_escape | normalize_whitepace | strip_newlines | strip | truncatewords: 100 }}{% endcapture %}

{% if page.tags %}
{% assign page_keywords = page.tags %}
{% else %}
{% assign page_keywords = site.keywords %}
{%endif %}
{% capture meta_keywords %}{{page_keywords | join: ', ' | escape}}{% endcapture %}

<link href="{{ site.url }}/{{ site.favicon }}" rel="icon">

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="title" content="{{meta_title}}">
<meta name="description" content="{{meta_description}}">
<meta name="keywords" content="{{meta_keywords}}">
<link rel="shortcut icon" href="{{ site.url }}/{{ site.favicon }}" type="image/png"/>
<link rel="canonical" href="{{ meta_url }}"/>
<meta name="referrer" content="no-referrer-when-downgrade"/>

<meta property="og:site_name" content="{{ site.title }}"/>
<meta property="og:type" content="website"/>
<meta property="og:title" content="{{ meta_title }}"/>
<meta property="og:description" content="{{ meta_description }}"/>
<meta property="og:url" content="{{ meta_url }}"/>
<meta property="og:image"
      content="{{ site.url }}/{% if page.cover %}{{ page.cover }}{% else %}{{ site.cover }}{% endif %}"/>
<meta property="og:locale" content="{{site.language}}">
<meta property="article:publisher" content="https://www.facebook.com/{{ site.facebook }}"/>{% if excerpt %}
<meta property="article:author" content="https://www.facebook.com/{{ site.facebook }}"/>
<meta property="article:tag" content="{{ page.categories | first | capitalizeall }}"/>{% endif %}
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="{{ meta_title }}}"/>
<meta name="twitter:description" content="{{ meta_description }}"/>
<meta name="twitter:url" content="{{ meta_url }}"/>
<meta name="twitter:image"
      content="{{ site.url }}/{% if page.cover %}{{ page.cover }}{% else %}{{ site.cover }}{% endif %}"/>
<meta name="twitter:site" content="@{{ site.twitter }}"/>
<meta name="twitter:creator" content="@{{ site.twitter }}"/>